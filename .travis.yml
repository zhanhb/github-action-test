dist: trusty
language: java
before_cache:
- ./mvnw build-helper:remove-project-artifact
- find $HOME/.m2/ -type d -name '*-SNAPSHOT' -exec rm -rf {} \; 2>/dev/null
cache:
  directories:
  - $HOME/.m2
jdk:
  - openjdk8
  - oraclejdk11
  - openjdk11
  - oraclejdk14
  - openjdk14
install: ./mvnw deploy -DskipTests=true -Dmaven.javadoc.skip=true -Dmaven.deploy.skip=true -B -V
script:
- chmod +x .travis/build.sh && .travis/build.sh
after_success:
- bash <(curl -s https://codecov.io/bash)
- jdk_switcher use openjdk8 && [ "$TRAVIS_JDK_VERSION" == "openjdk8" ] && source .travis/publish.sh || true
